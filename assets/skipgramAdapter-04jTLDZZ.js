const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CQ_Q2OOH.js","assets/index-D7zRL2Ch.js","assets/index-BVSRKNRa.css"])))=>i.map(i=>d[i]);
import{_ as p}from"./index-D7zRL2Ch.js";const l=256;async function A(r=[]){let t=null;try{t=await p(()=>import("./index-CQ_Q2OOH.js"),__vite__mapDeps([0,1,2]))}catch(n){return console.info("Skip-gram adapter unavailable: @tensorflow/tfjs not installed.",n),null}const i=S(r);return{vectorizeText:n=>{const o=y(n);if(!o.length)return new Array(l).fill(0);const s=new Float32Array(l);for(const u of o)s[u]+=i[u];const c=t.tensor1d(s),d=t.norm(c);if(d.dataSync()[0]===0)return t.dispose([c,d]),Array.from(s);const m=t.div(c,d),g=Array.from(m.dataSync());return t.dispose([c,d,m]),g},cosineSimilarity:(n,o)=>!Array.isArray(n)||!Array.isArray(o)||n.length!==o.length||n.length===0?0:t.tidy(()=>{const s=t.tensor1d(n),c=t.tensor1d(o),f=t.mul(t.norm(s),t.norm(c)).dataSync()[0];return f===0?0:t.dot(s,c).dataSync()[0]/f})}}async function _(r=[]){await A(r)}function w(r){return(r||"").toLowerCase().replace(/[^a-z0-9+#/.\s-]/g," ").replace(/\s+/g," ").trim()}function y(r){const t=w(r);if(!t)return[];const i=t.split(" ").filter(Boolean),a=[];for(const e of i){a.push(h(e));const n=e.split("");if(n.length>=3)for(let o=0;o<=n.length-3;o++){const s=n.slice(o,o+3).join("");a.push(h(s))}}return a}function h(r){let t=0;for(let i=0;i<r.length;i++)t=t*31+r.charCodeAt(i)>>>0;return t%l}function S(r){const t=new Uint32Array(l),i=Math.max(1,r.length);for(const e of r){const n=new Set;for(const o of y(e))n.add(o);for(const o of n)t[o]+=1}const a=new Float32Array(l);for(let e=0;e<l;e++)a[e]=Math.log(1+i/(1+t[e]));return a}export{A as getSkipGramAdapter,_ as warmUpSkipGram};
